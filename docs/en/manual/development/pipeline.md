# Pipeline

### Tests

- Tests run under separate jobs for each package
- NodeJS dependencies are installed for each app
- Package is checked for lint errors
- Package is checked for format errors
- Package unit tests are executed
- Package E2E tests are executed

### Packing

- Docker image is built from the `Dockerfile` from the app's root (not repo root).
- Docker image is tagged the commit hash and named `edge` for `staging` branch.
- Docker image is tagged the git version tag and named `latest` for `master` branch.
- The image is pushed on gitlab's public container registry.

### Documentation

- `gitbook` builds documentation from book structured in `docs` directory.
- make changes to the `docs` directory and commit to update documentation.
- `docUrl` for api docs generated by typedoc has to be added to book.json.
- `public` directory is git ignored as it is generated from docs and code changes.
- To generate and tests docs locally you must have gitbook and http-server installed globally (nodejs packages). Execute following commands to check documentation locally

```
gitbook build docs public
npm run docs
http-server public
```
### Deployment

Helm Releases are upgraded once changes are pushed to staging branch
